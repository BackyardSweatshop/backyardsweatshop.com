import{a as e,c as t,d as n,f as r,h as i,i as a,l as o,m as s,n as c,p as l,r as u,s as d,t as f,u as p}from"./index-Dj_8t1Oa.js";function m(e){let t=e||new AudioContext,n=120,r=60/n,i=0,a=!1,o=0,s=null,c=[],l=[],u=null,d=t.createGain();d.gain.value=0,d.connect(t.destination);function f(){let e=t.sampleRate*2,n=t.createBuffer(1,e,t.sampleRate),r=n.getChannelData(0);for(let t=0;t<e;t++)r[t]=Math.random()*2-1;return n}function p(){m();let e=f();u=t.createBufferSource(),u.buffer=e,u.loop=!0,u.connect(d),u.start()}function m(){if(u){try{u.stop()}catch{}u.disconnect(),u=null}}function h(e){d.gain.setTargetAtTime(e,t.currentTime,.01)}function g(e){n=e,r=60/e}function _(e){return fetch(e).then(e=>e.arrayBuffer()).then(e=>t.decodeAudioData(e))}function v(e,t){let n=i+e*r;c.push({time:n,callback:t})}function y(e,n,a){v(e,()=>{let o=t.createBufferSource();o.buffer=n,o.connect(a||t.destination),o.start(i+e*r)})}async function b(e){let n=t.createBufferSource();return n.buffer=e,n.connect(t.destination),new Promise(e=>{n.addEventListener(`ended`,()=>e()),n.start()})}function x(e,n,a=.1,o){v(e,()=>{let s=t.createOscillator(),c=t.createGain(),l=i+e*r;s.frequency.value=n,s.type=`sine`,c.gain.setValueAtTime(1,l),c.gain.linearRampToValueAtTime(0,l+a),s.connect(c),c.connect(o||t.destination),s.start(l),s.stop(l+a)})}function S(){let e=t.currentTime;for(;o<e+.2;){for(let e of c)Math.abs(e.time-o)<.001&&e.callback();o+=r}}function C(){if(!a)return;let e=t.currentTime,n=e-i;for(let t of l)t(n,e);requestAnimationFrame(C)}function w(){a||(a=!0,i=t.currentTime+.1,o=i,p(),s=window.setInterval(S,.025*1e3),requestAnimationFrame(C))}function T(){a=!1,s!==null&&(clearInterval(s),s=null),c.length=0,m()}function E(e){l.push(e)}function D(){return t.resume()}return{setTempo:g,start:w,stop:T,loadAudioFile:_,playBuffer:b,scheduleEvent:v,scheduleBufferPlayback:y,scheduleTone:x,onVisualUpdate:E,resume:D,setWhiteNoiseVolume:h}}var h={class:`h-full flex items-center justify-center bg-black text-white overflow-hidden`},g={key:0,class:`text-center space-y-6`},_={class:`space-x-2`},v={class:`space-x-2`},y={key:1,class:`text-center`},b={class:`text-6xl`},x={key:2,class:`transition-all duration-500 ease-in-out`},S={class:`relative w-64 h-64 flex items-center justify-center`},C={class:`relative z-10 w-full h-full`,viewBox:`0 0 100 100`},w=[`stroke-dashoffset`],T={x:`50`,y:`65`,"text-anchor":`middle`,"font-size":`42`,fill:`white`,"font-weight":`bold`},E=3,D=4,O=((e,t)=>{let n=e.__vccOpts||e;for(let[e,r]of t)n[e]=r;return n})(d({__name:`timer`,setup(d){let O=s(!1),k=s(30),A=s(70),j=s(0),M=s(!1),N=s(0),P=s(!1),F=s([]),I=0;function L(){let e=I++;F.value.push({id:e}),t(()=>{setTimeout(()=>{F.value=F.value.filter(t=>t.id!==e)},2e3)})}let R=u(()=>60/A.value),z=s(0),B=m();B.onVisualUpdate(e=>{let t=D*R.value;z.value=e%t/t});function V(){let e=Number(k.value);if(isNaN(e)||e<=0)return;B.setTempo(A.value),M.value=!0,O.value=!1,j.value=e,N.value=E,H(N.value.toString());let t=setInterval(()=>{N.value--,H(N.value.toString()),N.value<=1&&(clearInterval(t),new Promise(e=>setTimeout(e,1e3)).then(()=>{N.value=0}).then(()=>{M.value=!1,U()}))},1e3)}function H(e){return new Promise((t,n)=>{let r=new SpeechSynthesisUtterance(e);r.lang=`en-US`,window.speechSynthesis.cancel(),window.speechSynthesis.speak(r),r.addEventListener(`end`,t),r.addEventListener(`error`,n)})}function U(){let e=Number(k.value);isNaN(e)||e<=0||(O.value=!0,j.value=e,B.resume().then(()=>{let t=1/D,n=Math.ceil(e/t);B.setWhiteNoiseVolume(.001),B.start();for(let r=0;r<n;r++){let n=r,i=r%4==0?1047:349.2;B.scheduleTone(n,i,.1),B.scheduleEvent(n,()=>{P.value=!0,setTimeout(()=>P.value=!1,150)}),B.scheduleEvent(n,()=>{L()}),B.scheduleEvent(n,()=>{j.value=Math.max(0,e-r*t)}),n%4==0&&B.scheduleEvent(n,()=>{H(j.value.toString())})}B.scheduleTone(n,1397,.1),B.scheduleEvent(n,()=>{B.stop(),O.value=!1})}))}return o(()=>{Promise.all([]).then(()=>{})}),p(()=>{B.stop()}),(t,o)=>(n(),e(`div`,h,[!O.value&&!M.value?(n(),e(`div`,g,[o[4]||=a(`h1`,{class:`text-3xl font-bold`},`Rep Counter`,-1),a(`div`,_,[l(a(`input`,{"onUpdate:modelValue":o[0]||=e=>k.value=e,type:`number`,min:`1`,class:`w-20 text-center p-2 rounded bg-neutral-800 border border-neutral-600 text-white`},null,512),[[f,k.value]]),o[2]||=a(`span`,{class:`text-neutral-400`},`reps`,-1)]),a(`div`,v,[l(a(`input`,{"onUpdate:modelValue":o[1]||=e=>A.value=e,type:`number`,min:`1`,class:`w-20 text-center p-2 rounded bg-neutral-800 border border-neutral-600 text-white`},null,512),[[f,A.value]]),o[3]||=a(`span`,{class:`text-neutral-400`},`bpm`,-1)]),a(`button`,{onClick:V,class:`bg-blue-600 hover:bg-blue-700 transition px-6 py-2 rounded text-white font-semibold`},` Start `)])):M.value?(n(),e(`div`,y,[o[5]||=a(`h2`,{class:`text-4xl font-bold mb-4`},`Get Ready`,-1),a(`p`,b,i(N.value),1)])):(n(),e(`div`,x,[a(`div`,S,[(n(),e(`svg`,C,[o[6]||=a(`circle`,{cx:`50`,cy:`50`,r:`45`,fill:`none`,stroke:`rgba(255, 255, 255, 0.1)`,"stroke-width":`10`},null,-1),a(`circle`,{cx:`50`,cy:`50`,r:`45`,fill:`none`,stroke:`#3b82f6`,"stroke-width":`10`,"stroke-linecap":`round`,"stroke-dasharray":`282.6`,"stroke-dashoffset":282.6*(1-z.value),transform:`rotate(-90 50 50)`},null,8,w),a(`text`,T,i(Math.ceil(j.value)),1)])),(n(!0),e(c,null,r(F.value,t=>(n(),e(`div`,{key:t.id,class:`absolute inset-0 rounded-full bg-blue-500/30 animate-pulse-wave`}))),128))])]))]))}}),[[`__scopeId`,`data-v-0d1ab371`]]);export{O as default};